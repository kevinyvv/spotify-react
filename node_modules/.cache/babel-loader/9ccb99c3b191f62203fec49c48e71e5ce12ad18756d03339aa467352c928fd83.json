{"ast":null,"code":"var _jsxFileName = \"/Users/kevin/spotify-react/src/Components/CreatePlaylist.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, Fragment } from 'react';\nimport axios from 'axios';\nimport Authorize from './authorize';\nimport Main from './mainpage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Playlist = ({\n  recs\n}) => {\n  _s();\n  const [token, setToken] = useState(\"\");\n\n  // gets token from local storage by splitting hash at accesstoken value\n  useEffect(() => {\n    const hash = window.location.hash;\n    let token = window.localStorage.getItem(\"token\");\n    if (!token && hash) {\n      token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1];\n      window.location.hash = \"\";\n      window.localStorage.setItem(\"token\", token);\n    }\n    setToken(token);\n  }, []);\n  async function makePL(Name, Description, URIList) {\n    const getid = await axios.get('https://api.spotify.com/v1/me', {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    console.log(getid.data.id);\n    let ID = getid.data.id;\n    let response = await axios('https://api.spotify.com/v1/users/' + ID + '/playlists', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      data: JSON.stringify({\n        name: Name,\n        description: Description\n      })\n    });\n    console.log(response);\n    let PLID = response.data.id;\n    await axios('https://api.spotify.com/v1/playlists/' + PLID + '/tracks', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      },\n      data: JSON.stringify({\n        uris: URIList\n      })\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid justify-center mt-16 space-y-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"sm:text-3xl text-xl font-bold text-white text-center\",\n      children: \" Step 3: Save your recommendations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), token ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        makePL(\"test\", \"spotify api test\", recs);\n      },\n      className: \"rounded-3xl bg-[#1DB954] py-2 px-2 font-bold text-xl scale-75 sm:scale-100 hover:scale-105 hover:bg-[#2bde6a]\",\n      children: \" Create a playlist.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center text-white\",\n      children: \" Please login to your Spotify account first. \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 7\n  }, this);\n};\n_s(Playlist, \"uRWVyxPfKU3Lv5uAeNftFtP/ZvU=\");\n_c = Playlist;\nexport default Playlist;\nvar _c;\n$RefreshReg$(_c, \"Playlist\");","map":{"version":3,"names":["useEffect","useState","Fragment","axios","Authorize","Main","jsxDEV","_jsxDEV","Playlist","recs","_s","token","setToken","hash","window","location","localStorage","getItem","substring","split","find","elem","startsWith","setItem","makePL","Name","Description","URIList","getid","get","headers","console","log","data","id","ID","response","method","JSON","stringify","name","description","PLID","uris","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/kevin/spotify-react/src/Components/CreatePlaylist.jsx"],"sourcesContent":["\nimport {useEffect, useState, Fragment} from 'react';\nimport axios from 'axios';\nimport Authorize from './authorize';\nimport Main from './mainpage';\n\nconst Playlist = ({recs}) => {\n  const [token, setToken] = useState(\"\")\n\n// gets token from local storage by splitting hash at accesstoken value\n  useEffect(() => {\n    const hash = window.location.hash\n    let token = window.localStorage.getItem(\"token\")\n\n    if (!token && hash) {\n        token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1]\n\n        window.location.hash = \"\"\n        window.localStorage.setItem(\"token\", token)\n    }\n\n    setToken(token)\n\n  }, [])\n\n  async function makePL(Name, Description, URIList){\n    const getid = await axios.get('https://api.spotify.com/v1/me', {\n        headers: {\n            'Authorization' : `Bearer ${token}`\n        }\n    })\n    console.log(getid.data.id)\n    let ID = getid.data.id\n    let response = await axios('https://api.spotify.com/v1/users/' + ID + '/playlists', {\n        method: 'POST',\n        headers: {\n            'Authorization' : `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        },\n        data: JSON.stringify({\n            name: Name,\n            description: Description\n        })\n    })\n    console.log(response)\n    let PLID = response.data.id\n    await axios('https://api.spotify.com/v1/playlists/' + PLID + '/tracks', {\n        method: 'POST',\n        headers: {\n            'Authorization' : `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        },\n        data: JSON.stringify({\n            uris: URIList\n        })\n    })\n  }\n\n  return(\n    \n      <div className='grid justify-center mt-16 space-y-8'>\n        <h1 className='sm:text-3xl text-xl font-bold text-white text-center'> Step 3: Save your recommendations</h1>\n            {token ?\n              <button onClick={() => {makePL(\"test\", \"spotify api test\", recs)}}\n              className='rounded-3xl bg-[#1DB954] py-2 px-2 font-bold text-xl scale-75 sm:scale-100\n              hover:scale-105 hover:bg-[#2bde6a]'> Create a playlist.\n              </button>\n                : <h2 className='text-center text-white'> Please login to your Spotify account first. </h2>\n              }\n        </div>\n      \n  )\n}\n\nexport default Playlist;\n\n\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}