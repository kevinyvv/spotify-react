{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kevin/spotify-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kevin/spotify-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kevin/spotify-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,Fragment,useContext}from'react';import axios from'axios';import Authorize from'./authorize';import Main from'./mainpage';import Recs from'./Recommendations';import{UridsContext}from'./Recommendations';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Playlist=function Playlist(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];// gets token from local storage by splitting hash at accesstoken value\nuseEffect(function(){var hash=window.location.hash;var token=window.localStorage.getItem(\"token\");if(!token&&hash){token=hash.substring(1).split(\"&\").find(function(elem){return elem.startsWith(\"access_token\");}).split(\"=\")[1];window.location.hash=\"\";window.localStorage.setItem(\"token\",token);}setToken(token);},[]);var urids=useContext(UridsContext);function makePL(_x,_x2,_x3){return _makePL.apply(this,arguments);}function _makePL(){_makePL=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(Name,Description,URIList){var getid,ID,response,PLID;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('https://api.spotify.com/v1/me',{headers:{'Authorization':\"Bearer \".concat(token)}});case 2:getid=_context.sent;console.log(getid.data.id);ID=getid.data.id;_context.next=7;return axios('https://api.spotify.com/v1/users/'+ID+'/playlists',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},data:JSON.stringify({name:Name,description:Description})});case 7:response=_context.sent;console.log(response);console.log(urids);PLID=response.data.id;console.log(PLID);_context.next=14;return axios('https://api.spotify.com/v1/playlists/'+PLID+'/tracks',{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},data:JSON.stringify({uris:URIList})});case 14:alert(\"Playlist created sucessfully!\");case 15:case\"end\":return _context.stop();}},_callee);}));return _makePL.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"grid justify-center mt-16 space-y-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"sm:text-3xl text-xl font-bold text-white text-center\",children:\" Step 3: Save your recommendations\"}),token?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){makePL(\"test\",\"spotify api test\",urids.map(function(i){return'spotify:track:'+i;}));},className:\"rounded-3xl bg-transparent py-2 px-2 font-bold text-xl scale-75 sm:scale-100 hover:scale-105 outline outline-1 hover:outline-2 outline-white text-white\",children:\" Create a playlist.\"}):/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-white\",children:\" Please login to your Spotify account first. \"})]});};export default Playlist;","map":{"version":3,"names":["useEffect","useState","Fragment","useContext","axios","Authorize","Main","Recs","UridsContext","jsx","_jsx","jsxs","_jsxs","Playlist","_useState","_useState2","_slicedToArray","token","setToken","hash","window","location","localStorage","getItem","substring","split","find","elem","startsWith","setItem","urids","makePL","_x","_x2","_x3","_makePL","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","Name","Description","URIList","getid","ID","response","PLID","wrap","_callee$","_context","prev","next","get","headers","concat","sent","console","log","data","id","method","JSON","stringify","name","description","uris","alert","stop","className","children","onClick","map","i"],"sources":["/Users/kevin/spotify-react/src/Components/CreatePlaylist.jsx"],"sourcesContent":["\nimport {useEffect, useState, Fragment, useContext} from 'react';\nimport axios from 'axios';\nimport Authorize from './authorize';\nimport Main from './mainpage';\nimport Recs from './Recommendations';\nimport { UridsContext } from './Recommendations';\n\nconst Playlist = () => {\n  const [token, setToken] = useState(\"\")\n\n// gets token from local storage by splitting hash at accesstoken value\n  useEffect(() => {\n    const hash = window.location.hash\n    let token = window.localStorage.getItem(\"token\")\n\n    if (!token && hash) {\n        token = hash.substring(1).split(\"&\").find(elem => elem.startsWith(\"access_token\")).split(\"=\")[1]\n\n        window.location.hash = \"\"\n        window.localStorage.setItem(\"token\", token)\n    }\n\n    setToken(token)\n\n  }, [])\n    const urids = useContext(UridsContext)\n\n  async function makePL(Name, Description, URIList){\n    const getid = await axios.get('https://api.spotify.com/v1/me', {\n        headers: {\n            'Authorization' : `Bearer ${token}`\n        }\n    })\n    console.log(getid.data.id)\n    let ID = getid.data.id\n    let response = await axios('https://api.spotify.com/v1/users/' + ID + '/playlists', {\n        method: 'POST',\n        headers: {\n            'Authorization' : `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        },\n        data: JSON.stringify({\n            name: Name,\n            description: Description\n        })\n    })\n    console.log(response)\n    console.log(urids)\n    let PLID = response.data.id\n    console.log(PLID)\n    await axios('https://api.spotify.com/v1/playlists/' + PLID + '/tracks', {\n        method: 'POST',\n        headers: {\n            'Authorization' : `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        },\n        data: JSON.stringify({\n            uris: URIList\n        })\n    })\n    alert(\"Playlist created sucessfully!\")\n  }\n\n  return(\n    \n      <div className='grid justify-center mt-16 space-y-8'>\n        <h1 className='sm:text-3xl text-xl font-bold text-white text-center'> Step 3: Save your recommendations</h1>\n            {token ?\n              <button onClick={() => {makePL(\"test\", \"spotify api test\", urids.map(i => 'spotify:track:' + i))}}\n              className='rounded-3xl bg-transparent py-2 px-2 font-bold text-xl scale-75 sm:scale-100\n              hover:scale-105 outline outline-1 hover:outline-2 outline-white text-white'> Create a playlist.\n              </button>\n                : <h2 className='text-center text-white'> Please login to your Spotify account first. </h2>\n              }\n        </div>\n      \n  )\n}\n\nexport default Playlist;\n\n\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}